!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){o=!0,i=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(3),a=r(i),u=n(4),s=r(u),d=n(5),c=r(d),l=n(1),f=n(6),p=(r(f),function N(t,e){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=[];e=Array.prototype.slice.apply(e);for(var o in e){var i=n.concat([o]),a=e[o];r.push([a,i]),a.children&&(r=r.concat(N(t,a.children,i)))}return r}),h=function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var a,u=function(){var t=a.value,n=o(t,2),r=n[0],i=n[1];if(r.events){var u=Object.keys(r.events).map(function(t){return[i,t,r.events[t]]});e=e.concat(u)}},s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)u()}catch(d){r=!0,i=d}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw i}}return e},v=function(t,e){return window.e=e,t.reduce(function(t,e){return t.children[e]},e)},g=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=window.performance.now(),a=t.apply(null,e);if(r&&n.innerHTML.length>0){var u=p(n,[a]),s=h(u),d=!0,c=!1,l=void 0;try{for(var f,g=s[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var y=f.value,m=o(y,3),O=m[0],T=m[1],b=m[2],w=v(O,n);if(!w)throw new Error("Server-side and client-side render tree differs!");w.addEventListener(T,b)}}catch(D){c=!0,l=D}finally{try{!d&&g["return"]&&g["return"]()}finally{if(c)throw l}}}else n.innerHTML="",n.appendChild(a);var E=window.performance.now();console.log("render",(E-i).toFixed(4)+"ms")},y=(0,a["default"])(document,{SHOULD_COMPONENT_UPDATE:function(t,e){return t.component(t.id+e)}}),m=function(t,e){switch(e.TYPE){case"ADD_TEXT_CHANGE":return e.value}return t},O=function(t,e){switch(e.type){case"EDIT_TODO_TEXT":var n=t.filter(function(t){return t.id===e.todo.id});if(!n.length)return t;var r=function(){var r=n.map(function(t){return Object.assign({},t,{text:e.text,editing:!1})}),o={};return r.forEach(function(t){return o[t.id]=t}),{v:t.map(function(t){return o[t.id]?o[t.id]:t})}}();if("object"==typeof r)return r.v;case"QUIT_EDITING":return t.map(function(t){return t.editing?Object.assign({},t,{editing:!1}):t});case"TOGGLE_EDITING":return t.map(function(t){return String(t.id)===String(e.todo.id)?Object.assign({},t,{editing:!Boolean(e.todo.editing)}):t.editing?Object.assign({},t,{editing:!1}):t});case"ADD_TODO":return t.concat([{text:e.text,finished:!1,id:(new Date).getTime()}]);case"ADD_BATCH_TODO":return e.todos;case"DELETE_TODO":return t.filter(function(t){return t.id!==e.id});case"TOGGLE_FINISHED":var o=t.indexOf(e.todo);return~o?(t[o]=Object.assign({},e.todo,{finished:!Boolean(e.todo.finished)}),t.slice()):t}return t},T=function(t,e){switch(e.TYPE){case"LOCATION_CHANGE":if(t!==e.location)return e.location}return t},b=window.__INITIAL__,w=(0,c["default"])(b,{todos:O,addText:m,location:T});b.location=window.location.pathname;var D=(0,s["default"])(w),E=document.getElementById("app"),_=function(t,e,n,r){var o=function(){r({TYPE:"LOCATION_CHANGE",location:n.pathname})},i=function(){e.back(),o()},a=function(){e.forward(),o()},u=function(t){e.pushState(null,null,t),o()},s=function(){o()};return t.addEventListener("popstate",s),{back:i,forward:a,change:u}},x=_(window,window.history,window.location,D);window.lotsOfTodos=function(){for(var t=arguments.length<=0||void 0===arguments[0]?1e3:arguments[0],e=[],n=0,r=t;r>n;n++)e.push({text:"This is #"+n,id:n});D({type:"ADD_BATCH_TODO",todos:e})},w.listen(function(t){g(l.app,[t,{history:x,DOM:y,dispatch:D}],E)}),g(l.app,[b,{history:x,DOM:y,dispatch:D}],E,E.innerHTML.length)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o),a=(0,i["default"])(function(t,e){var n=e.DOM,r=e.dispatch,o=function(t){t.preventDefault();var e=n.doc.getElementById("new-todo");0!==e.value.length&&(r({type:"ADD_TODO",text:e.value}),e.value="")};return n.div({id:"header"},n.form({id:"todo-form",submit:o},n.div({className:"form-group"},n.input({id:"new-todo",className:"todo-textarea",placeholder:"What needs to be done?",type:"text",submit:o}))))}),u=(0,i["default"])(function(t,e){var n=e.DOM,r=e.dispatch,o=e.toggleEditing,i=e.quitEditing,a=function(e,n){return 27===e.keyCode?o():void(13===e.keyCode&&(r({type:"EDIT_TODO_TEXT",todo:t,text:n.value}),i(),e.stopPropagation()))};return n.div({},Boolean(t.editing)?n.input({value:t.text,focusout:i,classname:"edit",autofocus:!0,id:"edit-"+t.id,keyup:a}):n.label({dblclick:o},t.text))}),s=(0,i["default"])(function(t,e){var n=e.DOM,r=e.dispatch,o=function(){return r({type:"QUIT_EDITING"})},i=function(){return r({type:"DELETE_TODO",id:t.id,text:t.text})},a=function(e){e.preventDefault(),o(),r({type:"TOGGLE_FINISHED",todo:t})},s=function(){r({type:"TOGGLE_EDITING",todo:t}),Boolean(t.editing)||n.doc.getElementById("edit-"+t.id).select()},d={className:"toggle",type:"checkbox",change:a};return t.finished&&(d.checked=!0),n.li({className:Boolean(t.editing)?"editing todo-item":"todo-item"},n.div({className:"view"},n.input(d),n.button({click:i,className:"destroy pull-right close-icon"})),u(t,{DOM:n,dispatch:r,toggleEditing:s,quitEditing:o}))}),d=(0,i["default"])(function(t,e){var n=(t.selectedTodoId,t.todos),r=e.DOM,o=e.dispatch;return r.ul({id:"todo-list"},n.map(function(t){return s(t,{DOM:r,dispatch:o})}))}),c=(0,i["default"])(function(t,e){var n=t.path,r=t.text,o=e.history,i=e.DOM,a=e.dispatch,u=function(t){t.preventDefault(),o.change(n,a)};return i.a({className:"link",href:n,click:u},r)}),l=(0,i["default"])(function(t,e){var n=e.DOM,r=t.todos.filter(function(t){return!t.finished}).length;return n.div({id:"todoapp"},n.h1({},"todos"),a({},e),d({todos:t.todos,selectedTodoId:t.selectedTodoId},e),n.div({id:"footer"},n.span({id:"todo-count"},n.strong({},String(r))," items left")),n.div({className:"text-center footer-links"},n.p({},"In console call ",n.strong({},"lotsOfTodos()")," to add 1000 todos (count might be specified via argument)"),c({text:"About this library",path:"/about",className:"link link--about"},e)))}),f=function(t,e){var n=e.DOM;return n.div({},n.h1({},"Supertiny application library?"),n.p({},'What does "supertiny" stands for? Well, just check your dev tools and go to "Network tab".'),n.p({},"You will see that whole bundle for this very small todo app weights just around ",n.strong({},"8KBs! (gziped just 4KBs)")),n.h2({},"What can it do?"),n.p({},"Well, not much. There is no DOM diffing so app tree is rerendered every time. However shouldComponentupdate decorator works well, so app is still fast"),n.p({},"And as you can see, routing works well either, but it does not support older browser. Well, I wanted to keep this library with no dependency..."),n.p({},"For more info, check githup repo's ",n.a({href:"https://github.com/vojtatranta/supertiny-app-lib"},"README.md.")))},p=function(t,e){var n=e.components[t.location];return n?n(t,e):e.components["!!NOT_FOUND!!"](t,e)},h=function(t,e){return e.DOM.div({},p(t,Object.assign(e,{components:{"/":l,"/about":f,"!!NOT_FOUND!!":l}})))};e["default"]={todoItem:s,app:h},t.exports=e["default"]},function(t,e){"use strict";function n(t,e){return t===e?!0:0===Object.keys(t).length&&0===Object.keys(e)?!0:Object.keys(e).every(function(n){return t[n]===e[n]})}function r(t){var e={},r={};return o++,function(){for(var i=arguments.length,a=Array(i),u=0;i>u;u++)a[u]=arguments[u];return{render_type:"SHOULD_COMPONENT_UPDATE",id:String(o),component:function(o){var i=e[o],u=r[o],s=a[0];return i&&u&&n(i,s)?u:(e[o]=s,r[o]=t.apply(void 0,a),r[o])}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.areSameShallow=n,e["default"]=r;var o=0},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=function(t){return"classname"===t.toLowerCase()&&(t="class"),t},r=function(t,e){var n=t[e];if(!Boolean(n))throw new Error("No renderer specified for type "+e+".\n        Pass customRenderers object with key of "+e+" and function as value that is capable of rendering element type.");return n},o=function(o,i,a,u){var s=t.createElement(o);return i&&Object.keys(i).forEach(function(t){"function"!=typeof i[t]?s.setAttribute(n(t),i[t]):(s.events||(s.events={}),s.events[t]=i[t],s.addEventListener(t,function(e){i[t](e,this)}))}),a&&s.appendChild(t.createTextNode(a)),u&&u.forEach(function(n,o){if(Array.isArray(n))n.map(function(t){s.appendChild(t)});else if(Boolean(n.render_type)){var i=r(e,n.render_type);s.appendChild(i(n,o))}else"string"==typeof n?s.appendChild(t.createTextNode(n)):s.appendChild(n)}),s},i={};return new Array("span","a","p","div","h1","h2","h3","strong","li","ul","img","form","input","label","textarea","button").forEach(function(t){i[t]=function(e,n,r){return Array.isArray(n)?(r=n,n=null):"string"!=typeof n?(r=Array.prototype.slice.apply(arguments).slice(1,arguments.length),n=null):"string"==typeof n&&(r=Array.prototype.slice.apply(arguments).slice(2,arguments.length)),o(t,e,n,r)}}),Object.create(Object.assign(t,i),{doc:{value:t}})},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return function(e){return t.dispatch(e)}},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){var n={reducers:e,listeners:[],state:t,dispatch:function(t){this.state=this.reduceState(this.state,t),this.changed(this.state)},reduceState:function(t,e){var n=this;return Object.keys(this.reducers).reduce(function(r,o){return r[o]=n.reducers[o](t[o],e),r},{})},changed:function(t){this.listeners.forEach(function(e){return e(t)})},listen:function(t){this.listeners.push(t)}};return Object.create(n)},t.exports=e["default"]},function(t,e){}]);